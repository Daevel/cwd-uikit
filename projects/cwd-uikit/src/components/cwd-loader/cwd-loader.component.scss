@import "../../styles.scss";

:host {
  display: block;
  width: 100%;
}

.loader {
  position: relative;
  height: 8px;
  border-radius: 4px;
  overflow: hidden;
  background-color: $color-border;
  border: solid 2px $color-primary-contrast;

  .bar,
  .bar-indeterminate {
    height: 100%;
    transition: width 0.3s ease;
  }

  /* Determinate mode */
  &.determinate {
    .bar {
      border-radius: 4px;
    }
  }

  /* Indeterminate mode */
  &.indeterminate {
    .bar-indeterminate {
      position: absolute;
      width: 30%;
      animation: indeterminate 1.2s infinite;
      border-radius: 4px;
    }
  }

  /* Color Variants */
  &.primary {
    .bar,
    .bar-indeterminate {
      background-color: $color-primary;
    }
  }

  &.secondary {
    .bar,
    .bar-indeterminate {
      background-color: $color-secondary;
    }
  }

  &.warn {
    .bar,
    .bar-indeterminate {
      background-color: $color-warn;
    }
  }

  &.danger {
    .bar,
    .bar-indeterminate {
      background-color: $color-danger;
    }
  }

  /* Striped effect */
  &.striped {
    .bar {
      background-image: linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.15) 25%,
        transparent 25%,
        transparent 50%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.15) 75%,
        transparent 75%,
        transparent
      );
      background-size: 1rem 1rem;
      animation: progress-striped 1s linear infinite;
    }
  }

  /* Label */
  .value-label {
    position: absolute;
    right: 0.5rem;
    top: -1.5rem;
    font-size: 0.85rem;
    font-weight: 500;
    color: $color-text;
  }
}

/* Animations */
@keyframes indeterminate {
  0% {
    left: -30%;
  }
  50% {
    left: 50%;
  }
  100% {
    left: 100%;
  }
}

@keyframes progress-striped {
  from {
    background-position: 1rem 0;
  }
  to {
    background-position: 0 0;
  }
}
